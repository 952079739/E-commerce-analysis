<!DOCTYPE html>
<html lang="zh">

	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta http-equiv="X-UA-Compatible" content="ie=edge" />
		<title>猎聘</title>
		<link rel="stylesheet" href="../static/../static/lib/bootstrap-3.3.7-dist/css/bootstrap.min.css" />
		<link rel="stylesheet" href="../static/css/main.css" />
		<link rel="shortcut icon" type="image/x-icon" href="../static/img/favicon.ico" />
	</head>

	<body>
		<!--导航栏 -->
		<div class="navbar navbar-default">
			<div class="container">
				<div class="navbar-header">
					<a href="index.html" class="navbar-brand"></a>
				</div>
				<!--<ul class="nav navbar-nav">				
				<li ><a href="index.html">首页</a></li>
				<li class="active"><a href="#">找职位</a></li>
				<li><a href="#">名企校招</a></li>
				<li><a href="#">宣讲会</a></li>
				<li><a href="#">空中宣讲会</a></li>
			</ul>-->
			
			<div class="col-sm-2 btn-groupn navbar-right">
				<a class="dropdown-toggle" data-toggle="dropdown"><span class="glyphicon glyphicon-user" id="user_name"> </span></a>
				<ul class="dropdown-menu dropdown-menu-left">
					<li>
						<a href="user-info.html">我的求职</a>
						<a href="company-info.html">我的招聘</a>
					</li>
					<!--<li>
						<a href="#">投递记录</a>
					</li>-->
					<li role="separator" class="divider"></li>
					<li>
						<a href="login.html">退出</a>
					</li>
				</ul>
			</div>
			</div>
		</div>

		<!--上-->

		<!--搜索栏-->
		<div class="container search-index">
			<div class="col-sm-2"></div>
			<div class="col-sm-6 search-bar">
				<input type="search" class="form-control" placeholder="搜职位、搜公司、搜校招、搜关键字...">
			</div>
			<div class="col-sm-2 search-btn">
				<button type="submit" class="button">搜索</button>
			</div>
			<div class="col-sm-2"></div>
		</div>

		<!--下-->
		<div class="container container-change">
			<!--container-adapt-->
			<div class="row">
				<div class="col-sm-9">
					<!--分类显示 -->

					<div class="position-classify clearfix">
						<ul class="filter active">						
							<li class="condition">
								<dl class="clearfix" data-selector="industrys" id="industry_id">
									<dt class="special">行业：</dt>
									<dd class="active" data-id="000">不限</dd>
								</dl>
							</li>
						</ul>
					</div>
				
					<!--具体显示-->
					<div class="position-list" id="position_list">	
						
					</div>
				</div>

				<div class="col-sm-3">
					<!--推荐栏1-->
					<div class="recommend-card" id="recommend_like">
						<div class="card-title clearfix"><span>|</span>猜你喜欢
							<a href="#">换一批</a>
						</div>					
					</div>
					<!--推荐栏2-->
					<div class="recommend-card" id="recommend_hot">
						<div class="card-title clearfix"><span>|</span>热门职位
							<a href="#">换一批</a>
						</div>
											
					</div>
				</div>
			</div>

		</div>

		<div class="footer">
			©2020 猎聘 (京)-经营性-2017-0020 京公网安备11000002000001号 京ICP证030173号
		</div>
		<!-- jQuery (Bootstrap 的所有 JavaScript 插件都依赖 jQuery，所以必须放在前边) -->
		<script src="../static/lib/jquery/jquery-3.4.1.js"></script>
		<!-- 加载 Bootstrap 的所有 JavaScript 插件。你也可以根据需要只加载单个插件。 -->
		<script src="../static/lib/bootstrap-3.3.7-dist/js/bootstrap.js"></script>
		
		<script>
			
			var href = location.href
					
			
			$(function(){
				username_add()
				classify_build()
				job_build()
				likejob_build()
				hotjob_build()
				
				//增加名字
				function username_add(){
					var date = sessionStorage.getItem('username')
					$("#user_name").append(date)
				}
				
				//分类显示
				function classify_build(){
					var classifytemp = '';
					$.ajax({
						type:"get",
						url:"../static/date/classify.json",
						dataType:"json",
						success:function(result){
							var classifylist = result.classify
							for(var i = 0; i < classifylist.length; i++){
								classifytemp += '<dd data-id="'+classifylist[i].id+'">'+classifylist[i].name+'</dd>'
							}
							$("#industry_id").append(classifytemp)
						}
					});
				}
				
				//左边职业显示
				function job_build(){
					var jobtemp = '';
					$.ajax({
						type:"get",
						url:"../static/date/job.json",
						dataType:"json",
						success:function(result){
							var joblist = result.position
							console.log(joblist)
							for(var i = 0; i < joblist.length; i++){
								jobtemp += 	'<div class="position-list-item clearfix">'+
												'<div class="col-sm-6">'+
													'<button class="title" id="position_infomation" position_id="'+joblist[i].id+'" >'+joblist[i].name+
													'</button>'+
													'<div class="info infoleft">'+
														'<div class="col-sm-8 row">'+
														'<span class="glyphicon glyphicon-map-marker">'+joblist[i].position_place+'</span>'+										
														'</div>'+
														'<div class="col-sm-4">'+
														'<span class="glyphicon glyphicon-education">'+joblist[i].classify.name+'</span>'+	
														'</div>'+
													'</div>'+
												'</div>'+
												'<div class="col-sm-3">'+
													'<a class="title1" href="#">'+joblist[i].company.name+'</a>'+												
												'</div>'+
												'<div class="col-sm-2">'+
													'<img src="'+joblist[i].company.photo_addr+'" alt="公司Logo" />'+
												'</div>'+
											'</div>'
							}
							$("#position_list").append(jobtemp)
						}
					});
				}	
				
				//猜测职位
				function likejob_build(){
					var likejobtemp = '';
					$.ajax({
						type:"get",
						url:"../static/date/job.json",
						dataType:"json",
						success:function(result){
							var joblist = result.position
							console.log(joblist)
							for(var i = 0; i < joblist.length-4; i++){
								likejobtemp += '<div class="card-body clearfix">'+
											'<div class="col-sm-4">'+
												'<img src="'+joblist[i].company.photo_addr+'" alt="公司Logo" />'+
											'</div>'+
											'<div class="col-sm-8 card-body-abr">'+
												'<button class="title" id="position_infomation" position_id="'+joblist[i].id+'" >'+joblist[i].name+'</button>'+
													'<br />'+
												'<button class="title1" href="#">'+joblist[i].company.name+'</button>'+
											'</div>'+
										'</div>'
							}
							$("#recommend_like").append(likejobtemp)
						}
					});
				}	
				
				//热门职业
				function hotjob_build(){
					var hotjobtemp = '';
					$.ajax({
						type:"get",
						url:"../static/date/job.json",
						dataType:"json",
						success:function(result){
							var joblist = result.position
							console.log(joblist)
							for(var i = 4; i < joblist.length; i++){
								hotjobtemp += '<div class="card-body clearfix">'+
											'<div class="col-sm-4">'+
												'<img src="'+joblist[i].company.photo_addr+'" alt="公司Logo" />'+
											'</div>'+
											'<div class="col-sm-8 card-body-abr">'+
												'<button id="position_infomation" position_id="'+joblist[i].id+'" class="title">'+joblist[i].name+'</button>'+
													'<br />'+
												'<button class="title1" href="#">'+joblist[i].company.name+'</button>'+
											'</div>'+
										'</div>'
							}
							$("#recommend_hot").append(hotjobtemp)
						}
					});
				}					
			})
			
			$(document).on("click","#position_infomation",function (){
				var position_id = $(this).attr("position_id")
				location.href="position-info.html?"+"id="+encodeURI(position_id)
			})
			
			//点击行业性质添加active
			$(document).on("click","#industry_id dd",function (){
				$("#industry_id dd").removeClass("active")
				$(this).addClass("active")
				var classify_id = $(this).attr("data-id")
				if(classify_id != 000){
					$("#position_list").empty()
					$(function(){
						classifyjob_build()
							//分类显示
							function classifyjob_build(){
									var classifyjobtemp = '';
									$.ajax({
										type:"get",
										url:"../static/date/job.json",
										dataType:"json",
										success:function(result){
											var classifyjoblist = result.position
											console.log(classifyjoblist)
											for(var i = 0; i < classifyjoblist.length; i++){
												if(classify_id == classifyjoblist[i].classify.id){
													classifyjobtemp += 	'<div class="position-list-item clearfix">'+
																'<div class="col-sm-6">'+
																	'<button class="title" id="position_infomation" position_id="'+classifyjoblist[i].id+'" >'+classifyjoblist[i].name+
																	'</button>'+
																	'<div class="info infoleft">'+
																		'<div class="col-sm-8 row">'+
																		'<span class="glyphicon glyphicon-map-marker">'+classifyjoblist[i].position_place+'</span>'+										
																		'</div>'+
																		'<div class="col-sm-4">'+
																		'<span class="glyphicon glyphicon-education">'+classifyjoblist[i].classify.name+'</span>'+	
																		'</div>'+
																	'</div>'+
																'</div>'+
																'<div class="col-sm-3">'+
																	'<a class="title1" href="#">'+classifyjoblist[i].company.name+'</a>'+												
																'</div>'+
																'<div class="col-sm-2">'+
																	'<img src="'+classifyjoblist[i].company.photo_addr+'" alt="公司Logo" />'+
																'</div>'+
															'</div>'
												}
												
											}
											$("#position_list").append(classifyjobtemp)
										}
									});
								}
					})
				}else{
					 window.location.href = 'job.html'
				}
				
			})
						
			
			
			
		</script>
		
		<!--自己的插件 -->
		<script src="../static/js/index.js"></script>
	</body>

</html>