<!DOCTYPE html>
<html lang="zh">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta http-equiv="X-UA-Compatible" content="ie=edge" />
	<title>公司信息</title>
	<link rel="stylesheet" href="../static/lib/bootstrap-3.3.7-dist/css/bootstrap.min.css"/>
	<link rel="stylesheet" href="../static/css/main.css" />
	<link rel="stylesheet" href="../static/css/user.css" />
	<link rel="stylesheet" href="../static/css/cuser.css" />
	<link rel="shortcut icon" type="image/x-icon" href="../static/img/favicon.ico" />	
</head>
<body>
	<!--导航栏 -->
	<div class="navbar navbar-default">
		<div class="container container-change">	
			
			<div class="col-sm-3 navbar-header">
			<a href="index.html" class="navbar-brand"></a>
			</div>
			
			<ul class="col-sm-7 nav navbar-nav">				
				<!--<li><a href="user-index.html">首页</a></li>
				<li><a href="position.html">找职位</a></li>
				<li><a href="#">名企校招</a></li>
				<li><a href="#">宣讲会</a></li>
				<li><a href="#">空中宣讲会</a></li>-->
			</ul>	
			
			<div class="col-sm-2 btn-groupn navbar-right">
			  <a class="dropdown-toggle" data-toggle="dropdown" ><span class="glyphicon glyphicon-user" id="user_name"> </span></a>
			  <ul class="dropdown-menu dropdown-menu-left">
			    <li><a href="job.html">返回主页</a></li>	
			    <li role="separator" class="divider"></li>
			    <li><a href="login.html">退出</a></li>
			  </ul>	
			</div>
		
		</div>		
	</div>
	
	<!--个人-->	
	<div class="container user-info-top user-info-top-company clearfix">
		<div class="col-sm-2 clearfix">
			<img src="../static/img/user.png" />
		</div>
		<div class="col-sm-8 clearfix">
			<p class="info-p1" id="company_nameh"></p>
			<p class="info-p2">
			<span id="company_emailh"></span>
			
			</p>			
		</div>
		<div class="col-sm-1"></div>
		<div class="col-sm-1 user-info-top-a"><a data-toggle="modal" data-target="#companyUpdateModal">编辑</a></div>
	</div>
	
	<div class="container user-info-nav clearfix ">	
		<ul class="nav navbar-nav clearfix" id="company_function">				
			<li><a class="active" href="company-info.html">招聘</a></li>
			<li><a href="javascript:;" id="company_function_issue">发布</a></li>
		</ul>	
		
	</div>
			
	<div class="container  user-info">
		<div class="col-sm-9">
			<div class="user-info-right clearfix row" >
				
				<div class="user-list" id="company_function_recruit">					
					<div class="user-list-item1"><span>|</span> 我的发布</div>
					<div class="container user-list-width" id="company_release">
						
					</div>
										
				</div>
					
			</div>
		</div>
		<div class="col-sm-3 ">
			<div class="info-worker right recommend-card">
				<!--推荐栏1-->
								
			</div>	
		</div>
		
	</div>
                                                         
	
	<!--发布职位修改模态框 -->
	<div class="modal fade" id="reUpdateModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
	    <div class="modal-dialog" role="document">
	        <div class="modal-content">
	            <div class="modal-header">
	                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
	                <h4 class="modal-title" >职位信息修改</h4>
	            </div>
	            <div class="modal-body">
	            
	                <form class="form-horizontal" action="" method="post">
	                	
	                <div class="form-group">
                        <label class="col-sm-2 control-label">岗位名称</label>
                        <div class="col-sm-8">
                            <input type="text" name="empName" class="form-control" id="position_update_input" >                       
                        </div>
                    </div>
                    
                     <div class="form-group">
                        <label class="col-sm-2 control-label">职位类型</label>
                        <div class="col-sm-8">
                            <input type="text" name="empName" class="form-control" id="positionc_update_input" >                       
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-sm-2 control-label">职位待遇</label>
                        <div class="col-sm-8">
                            <input type="text" name="empName" class="form-control" id="positions_update_input" >                       
                        </div>
                    </div>
                    
                     <div class="form-group">
                        <label class="col-sm-2 control-label">职位地点</label>
                        <div class="col-sm-8">
                            <input type="text" name="empName" class="form-control" id="positionl_update_input" >                       
                        </div>
                    </div>                                                                       
						
	                </form>
	            </div>
	            <div class="modal-footer">
	                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
	                <button type="button" class="btn btn-primary" id="emp_update_btn">确定</button>
	            </div>
	        </div>
	    </div>
	</div>
		
	<!--公司信息修改模态框 -->
	<div class="modal fade" id="companyUpdateModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
	    <div class="modal-dialog" role="document">
	        <div class="modal-content">
	            <div class="modal-header">
	                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
	                <h4 class="modal-title" >公司信息修改</h4>
	            </div>
	            <div class="modal-body">
	            
	                <form class="form-horizontal">
	                 <div class="form-group">
                        <label class="col-sm-2 control-label">公司名称</label>
                        <div class="col-sm-8">
                            <input type="text" name="empName" class="form-control" id="cname_update_input" >                       
                        </div>
                    </div>
                             
                    <div class="form-group">
                        <label class="col-sm-2 control-label">公司邮箱</label>
                        <div class="col-sm-8">
                            <input type="email" name="empName" class="form-control " id="cemail_update_input" ></textarea>
                        </div>
                    </div>
						
	                </form>
	            </div>
	            <div class="modal-footer">
	                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
	                <button type="button" class="btn btn-primary" id="emp_update_btn">确定</button>
	            </div>
	        </div>
	    </div>
	</div>	
	
	 <!-- jQuery (Bootstrap 的所有 JavaScript 插件都依赖 jQuery，所以必须放在前边) -->
    <script src="../static/lib/jquery/jquery-3.4.1.js"></script>
    <!-- 加载 Bootstrap 的所有 JavaScript 插件。你也可以根据需要只加载单个插件。 -->
    <script src="../static/lib/bootstrap-3.3.7-dist/js/bootstrap.js"></script>
    <!--自己的插件 -->
    <script>
    	$("#company_function a").click(function(){
			$("#company_function a").removeClass("active");
			$(this).addClass("active");
		})
    	
    	$("#company_function_issue").click(function(){
    		$("#company_function_recruit").empty()
    		$("#company_function_recruit").append($("<div class='user-list-item1'></div>").append($("<span>|</span>")).append(" 发布职位"))
    									  .append($("<form class='form-horizontal form-cuser' action='#' method='post'></form>")
    									  
    									  .append($("<div class='form-group'></div>")
    									  .append($("<label class='col-sm-2 control-label'></label>").append("岗位名称"))
    									  .append($("<div class='col-sm-8'></div>").append($(" <input type='text' name='empName' class='form-control' id='pname_add_input' >"))
    									 ))
    									  
    									  .append($("<div class='form-group'></div>")
    									  .append($("<label class='col-sm-2 control-label'></label>").append("职位类型"))
    									  .append($("<div class='col-sm-8'></div>").append($(" <input type='text' name='empName' class='form-control' id='positiont_add_input' >"))
    									 ))
    									  
    									  .append($("<div class='form-group'></div>")
    									  .append($("<label class='col-sm-2 control-label'></label>").append("工作地点"))
    									  .append($("<div class='col-sm-8'></div>").append($(" <input type='text' name='empName' class='form-control' id='postionl_add_input' >"))
    									 ))
    									  
    									  .append($("<div class='form-group'></div>")
    									  .append($("<label class='col-sm-2 control-label'></label>").append("职业待遇"))
    									  .append($("<div class='col-sm-8'></div>").append($(" <input type='text' name='empName' class='form-control' id='postions_add_input' >"))
    									 ))
    									  
    									 .append($("<div class='form-group'></div>")
    									  .append($("<input type='submit' class='user-submit-btn' value='提交'/>"))
    									  .append($("<input type='button' class='user-submit-btn submit-btn' value='取消'/>"))
    									  ) 
    									 
    									  
    									  )
    							
    	})
    	
    	$(function(){
    		username_add()
    		companyinfo_add()
    		release_build()
    		
    		//增加名字
				function username_add(){
					var date = sessionStorage.getItem('username')
					$("#user_name").append(date)
				}
				
				
			//公司信息显示
				function companyinfo_add(){
					var username = sessionStorage.getItem('username')
					var data = {
						data:JSON.stringify({
							"username":username
						}),			
					}
					console.log(data)
					$.ajax({
						type: "post",
						url: "http://127.0.0.1:5000/company/info",
						dataType: "json",
						async: false,
						data: data,
						success: function(result){
							console.log(result)
							userinfolist = result	
							$("#company_nameh").append(userinfolist.company_name).append('<span class="glyphicon glyphicon-check"></span>')
							$("#company_emailh").append(userinfolist.company_email)	
						}
					});								
			}
					
				
			//我的招聘
				function release_build(){
					var company_position_list
					var username = sessionStorage.getItem('username')
					var data = {
						data:JSON.stringify({
							"username":username
						}),			
					}
					
					$.ajax({
						type: "post",
						url: "http://127.0.0.1:5000/company/company-position-select",
						dataType: "json",
						async: false,
						data: data,
						success: function(result){
							company_position_list = result
						}
					})
									
					var temp = ''	
					for (var i = 0; i<company_position_list.length; i++) {
					temp += '<div class="col-sm-4 user-list-rm1">'+
									'<button id="position_infomation" position_id="'+company_position_list[i].position_id+'" class="user-list-title1">'+company_position_list[i].position_name+'</button>'+
									'<button class="add-margin user-list-btn2" data-toggle="modal" data-target="#reUpdateModal" ><span>编辑</span></button>'+
									'<button class="user-list-btn3"><span>删除</span></button>'+
									'<div >'+
									'<div class="col-sm-5 row">'+
									'<img src="'+company_position_list[i].company_photo+'" />'+
									'</div>'+
									'<div class="col-sm-7 user-list-title2">'+
									'<a href="#">'+company_position_list[i].company_name+'</a>'+
									'</div>	'+
									'</div>'+
									'</div>'
					}
					$("#company_release").append(temp)
					
				}
				
				
				
    	})
    	 	
    	$(document).on("click","#position_infomation",function (){
				var position_id = $(this).attr("position_id")
				location.href="position-info.html?"+"id="+encodeURI(position_id)
			})
    </script>
    <script src="../static/js/index.js"></script>
</body>
</html>
	